(()=>{"use strict";function e(e){this.type=e,this.resizeTimeout}e.prototype.init=function(){const e=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(let e=0;e<this.nodes.length;e++){const t=this.nodes[e],n=t.dataset.da.trim().split(","),o={};o.element=t,o.parent=t.parentNode,o.destination=document.querySelector(n[0].trim()),o.breakpoint=n[1]?n[1].trim():"767",o.place=n[2]?n[2].trim():"last",this.оbjects.push(o)}this.оbjects.forEach(((e,t)=>{e.element.dataset.daIndex=t})),window.addEventListener("resize",(function(){clearTimeout(e.resizeTimeout),e.resizeTimeout=setTimeout((function(){e.mediaHandler()}),0)})),this.mediaHandler()},e.prototype.mediaHandler=function(){for(let e=0;e<this.оbjects.length;e++){const t=this.оbjects[e];window.matchMedia("(max-width: "+t.breakpoint+"px)").matches?this.delayedMoveTo(t.place,t.element,t.destination):t.element.classList.contains(this.daClassname)&&this.delayedMoveBack(t.parent,t.element)}},e.prototype.delayedMoveTo=function(e,t,n){setTimeout((()=>{t.classList.add(this.daClassname),"last"===e||e>=n.children.length?n.appendChild(t):"first"===e?n.insertBefore(t,n.firstElementChild):n.insertBefore(t,n.children[e])}),0)},e.prototype.delayedMoveBack=function(e,t){setTimeout((()=>{t.classList.remove(this.daClassname);const n=t.dataset.daIndex,o=e.children[n];e.insertBefore(t,o)}),0)};new e("max").init();let t={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}};function n(){if(location.hash)return location.hash.replace("#","")}function o(e){e=e?`#${e}`:window.location.href.split("#")[0],history.pushState("","",e)}let s=(e,t=500,n=0)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=`${e.offsetHeight}px`,e.offsetHeight,e.style.overflow="hidden",e.style.height=n?`${n}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!n,!n&&e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),!n&&e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideUpDone",{detail:{target:e}}))}),t))},i=(e,t=500,n=0)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden=!e.hidden&&null,n&&e.style.removeProperty("height");let o=e.offsetHeight;e.style.overflow="hidden",e.style.height=n?`${n}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideDownDone",{detail:{target:e}}))}),t)}},r=!0,a=(e=500)=>{r&&(r=!1,e?setTimeout((function(){r=!0,document.documentElement.style.removeProperty("--scrollbar-compensate"),document.documentElement.classList.remove("lock")}),e):(r=!0,document.documentElement.style.removeProperty("--scrollbar-compensate"),document.documentElement.classList.remove("lock")))},c=(e=500)=>{if(r){const t=window.innerWidth-document.querySelector(".wrapper").offsetWidth;t>0&&document.documentElement.style.setProperty("--scrollbar-compensate",t+"px"),document.documentElement.classList.add("lock"),r=!1,e?setTimeout((function(){r=!0}),e):r=!0}};!function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){setTimeout((function(){document.documentElement.classList.add("loaded")}),0)})),document.querySelector(".icon-menu")&&document.addEventListener("click",(function(e){r&&e.target.closest(".icon-menu")&&(document.documentElement.classList.contains("menu-open")?(a(300),document.documentElement.classList.remove("menu-open")):(c(300),document.documentElement.classList.add("menu-open")))})),function(){const e=991.98,n=400,o=document.querySelectorAll("[data-submenu-spoller]"),r=document.querySelectorAll("[data-submenu]"),a=window.matchMedia("(max-width: 991.98px)"),c=new Event("resize");function d(e){if(e.matches)document.querySelectorAll("[data-submenu-link]").forEach((e=>{e.classList.remove("_active")})),r.forEach((e=>e.setAttribute("hidden","")));else{r.forEach((e=>e.removeAttribute("hidden")));const e=new Event("initPopperPosition");window.dispatchEvent(e)}l(o)}function l(e){e.forEach((e=>e.classList.remove("_open")))}a.addEventListener("change",(()=>d(a))),d(a),o.length&&o.forEach((n=>{const o=n.querySelector("[data-submenu]");window.dispatchEvent(c),n.addEventListener("mouseenter",(()=>{!t.any()&&o&&window.innerWidth>e&&n.classList.add("_open"),window.dispatchEvent(c)})),n.addEventListener("mouseleave",(()=>{!t.any()&&o&&window.innerWidth>e&&n.classList.remove("_open")}))})),document.addEventListener("click",(t=>{const r=t.target;if(r.closest("[data-submenu-link]")){t.preventDefault();const a=r.closest("[data-submenu-link]"),d=a.nextElementSibling,u=d.closest("[data-submenu-spoller]"),m=u.classList.contains("_open");window.innerWidth>e&&l(o),m&&!u.classList.contains("_slide")?window.innerWidth<e?(u.classList.add("_slide"),a.classList.remove("_active"),s(d,n),setTimeout((()=>{u.classList.remove("_open"),u.classList.remove("_slide")}),n)):u.classList.remove("_open"):u.classList.contains("_slide")||(window.dispatchEvent(c),u.classList.add("_slide"),u.classList.add("_open"),a.classList.add("_active"),window.innerWidth<e?(i(d,n),setTimeout((()=>{u.classList.remove("_slide")}),n)):u.classList.remove("_slide"))}else r.closest("[data-submenu-spoller]")||window.innerWidth>e&&l(o)}))}(),window.addEventListener("click",(e=>{if(e.target.closest(".checkbox")||e.target.closest(".radio")){let t=null;e.target.closest(".checkbox")&&(t=e.target.closest(".checkbox").querySelector('input[type="checkbox"]'),t&&(t.checked=!t.checked)),e.target.closest(".radio")&&(t=e.target.closest(".radio").querySelector('input[type="radio"]'),t&&(t.checked=!0));let n=new Event("inputChange");t&&t.dispatchEvent(n)}})),window.addEventListener("keydown",(e=>{if("Enter"===e.key){const e=document.activeElement;if(e.closest(".checkbox")||e.closest(".radio")){let t=null;e.closest(".checkbox")&&(t=e.closest(".checkbox").querySelector('input[type="checkbox"]'),t&&(t.checked=!t.checked)),e.closest(".radio")&&(t=e.closest(".radio").querySelector('input[type="radio"]'),t&&(t.checked=!0));let n=new Event("inputChange");t&&t.dispatchEvent(n)}}})),function(){const e=document.querySelectorAll("[data-tabi-input]");e.length&&e.forEach((e=>{const t=document.querySelector(`label[data-tabi-label][for="${e.id}"]`);t&&t.addEventListener("keydown",(t=>{"Enter"===t.key&&e.click()}))}))}(),function(){const e=document.querySelectorAll("[data-inputmode]");e.length>0&&setTimeout((()=>{e.forEach((e=>{const t=e.dataset.inputmode;t&&e.setAttribute("inputmode",t)}))}),50)}(),function(){const e=document.querySelector(".top-header"),t=document.querySelector(".menu__body"),n=document.querySelector(".icon-menu"),o=()=>{const n=e.offsetHeight;t.style.setProperty("--menu-top-p",n/16+"rem")};function s(){requestAnimationFrame((()=>{requestAnimationFrame((()=>{setTimeout((()=>{o()}),0)}))}))}new ResizeObserver((()=>{o()})).observe(e),s(),window.addEventListener("load",s),n.addEventListener("click",s),window.addEventListener("scroll",s),window.addEventListener("resize",(()=>{o(),setTimeout((()=>{o()}),100)})),document.fonts.ready.then((()=>{s()}))}(),function(){const e=document.querySelector("header.header"),t=document.querySelector(".header__wrapper"),n=e.dataset.scroll?e.dataset.scroll:1,o=new CustomEvent("header-scroll");function s(){window.scrollY>=n?e.classList.contains("_header-scroll")||(e.classList.add("_header-scroll"),t.dispatchEvent(o)):e.classList.contains("_header-scroll")&&(e.classList.remove("_header-scroll"),t.dispatchEvent(o))}window.addEventListener("scroll",s),s()}(),function(){const e=document.querySelectorAll(".rating");e.length>0&&function(){let t,n;for(let t=0;t<e.length;t++){o(e[t])}function o(e){s(e),i(),e.classList.contains("rating--set")&&r(e)}function s(e){t=e.querySelector(".rating--active"),n=e.querySelector(".rating__value")}function i(e=n.innerHTML){const o=e/.05;t.style.width=`${o}%`}function r(e){const t=e.querySelectorAll(".rating__item");for(let o=0;o<t.length;o++){const r=t[o];r.addEventListener("mouseenter",(function(t){s(e),i(r.value)})),r.addEventListener("mouseleave",(function(e){i()})),r.addEventListener("click",(function(t){s(e),e.dispatchEvent(new CustomEvent("rating-set",{detail:{value:r.value}})),e.dataset.ajax?a(e,r.value):(n.innerHTML=o+1,i())}))}}async function a(e,t){if(!e.classList.contains("rating--sending")){e.classList.add("rating--sending");let o=await fetch("ajax/article-rating",{method:"POST",body:JSON.stringify({userRating:t}),headers:{"content-type":"application/json"}});if(o.success){const t=(await o.json()).newRating;n.innerHTML=t,i(),e.classList.remove("rating--sending")}else console.error("Error"),e.classList.remove("rating--sending")}}}()}(),function(){const e=document.querySelector("[data-sticky-item]");if(!e)return;const t=e.querySelector(".aside-blog__about-author"),n=e.querySelector(".aside-blog__category");function o(){const e=(t.offsetHeight+parseFloat(getComputedStyle(t).marginBottom)+10+20)/17;n.style.maxHeight=`calc(100dvh - ${e}rem - 8.3125rem)`}function s(){e.offsetHeight+30>=window.innerHeight?e.classList.add("_no-sticky"):e.classList.remove("_no-sticky")}t&&n?requestAnimationFrame((()=>setTimeout((()=>{o()}),0))):s();let i=window.innerWidth;window.addEventListener("resize",(()=>{const e=window.innerWidth;e!==i&&(t&&n?o():s(),i=e)}))}(),function(){function e(e){if(e.startsWith("#")&&!e.includes(" "))return document.getElementById(e.slice(1));try{return document.querySelector(e)}catch(t){return console.warn("Invalid selector:",e,t),null}}let t=({targetBlock:t,headerItem:n=!1,speed:o=500,offsetTop:s=0})=>{const i=e(t);if(i){let e=0;n&&(e=document.querySelector(n).offsetHeight),document.documentElement.classList.contains("menu-open")&&menuClose();let t=i.getBoundingClientRect().top+scrollY;t=e?t-e:t,t=s?t-s:t,window.scrollTo({top:t,behavior:"smooth"})}};if(!document.querySelector(".category-articles"))return;const s=document.querySelectorAll(".category-articles__link");if(s.length>0){const i="header .header__wrapper";if(s.forEach((e=>{e.addEventListener("click",(n=>{n.preventDefault();const s=e.hash;t({targetBlock:s,headerItem:i,offsetTop:10}),o(e.hash.replace("#",""))}))})),n()){let o;e(`#${n()}`)&&(o=`#${n()}`),o&&o&&window.addEventListener("load",(()=>{requestAnimationFrame((()=>{setTimeout((()=>{t({targetBlock:o,headerItem:i,offsetTop:10})}),300)}))}))}}}()})();